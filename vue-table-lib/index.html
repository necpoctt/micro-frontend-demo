<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Subtask B: Vue Table</title>
  </head>
  <body>
    <div style="padding: 20px">
      <h3>Vue Table Component Test</h3>

      <remote-vue-table id="vue-table"></remote-vue-table>
    </div>

    <script type="module" src="/src/main.ts"></script>

    <script>
      const table = document.getElementById('vue-table');

      const mockTableData = [
        {
          key: '1',
          carNumber: 'RDC-0986',
          spec: 'Benz - GLA - 6人座',
          type: '管制車輛',
          status: 'disabled',
          mileage: '2,197',
          lastCheckMileage: '2,199',
          lastCheckTime: '2026/01/01 16:24',
          lastRefuel: '2025/12/31',
          lastReturn: '2025/12/31 17:38',
          lastForm: '2026/01/01 10:16',
          lastUser: '林益凡',
          nextMaint: '2026/03/15',
          lastMaint: '2025/12/15',
          manager: '游國維',
          quota: '30,000',
          insurance: '統一東京',
        },
        {
          key: '2',
          carNumber: 'BUA-0298',
          spec: 'Benz - GLA - 6人座',
          type: '管制車輛',
          status: 'maintenance',
          mileage: '2,197',
          lastCheckMileage: '2,199',
          lastCheckTime: '2026/01/01 16:24',
          lastRefuel: '2025/12/31',
          lastReturn: '2025/12/31 18:02',
          lastForm: '2026/01/01 10:16',
          lastUser: '羅艾拉',
          nextMaint: '2026/03/15',
          lastMaint: '2025/12/15',
          manager: '游國維',
          quota: '30,000',
          insurance: '統一東京',
        },
        {
          key: '3',
          carNumber: 'RDK-0835',
          spec: 'Benz - GLA - 6人座',
          type: '管制車輛',
          status: 'fault',
          mileage: '2,197',
          lastCheckMileage: '2,199',
          lastCheckTime: '2025/12/29 14:12',
          lastRefuel: '2025/12/28',
          lastReturn: '2025/12/28 16:24',
          lastForm: '2025/12/29 09:58',
          lastUser: '林艾米',
          nextMaint: '2025/12/15',
          lastMaint: '2025/09/15',
          manager: '游國維',
          quota: '30,000',
          insurance: '和運',
        },
        {
          key: '4',
          carNumber: 'RDC-6822',
          spec: 'Nissan - Kicks - 4人...',
          type: '通用車輛',
          status: 'active',
          mileage: '2,197',
          lastCheckMileage: '2,199',
          lastCheckTime: '2025/12/29 14:12',
          lastRefuel: '2025/12/28',
          lastReturn: '2025/12/28 16:24',
          lastForm: '2025/12/29 09:58',
          lastUser: '林益凡',
          nextMaint: '2025/12/15',
          lastMaint: '2025/09/15',
          manager: '游國維',
          quota: '30,000',
          insurance: '華南保險',
        },
        {
          key: '5',
          carNumber: 'RDT-7269',
          spec: 'Nissan - Sentra - ...',
          type: '通用車輛',
          status: 'reserved',
          mileage: '2,197',
          lastCheckMileage: '2,199',
          lastCheckTime: '2025/12/29 14:12',
          lastRefuel: '2025/12/28',
          lastReturn: '2025/12/28 16:24',
          lastForm: '2025/12/29 09:58',
          lastUser: '羅艾拉',
          nextMaint: '2025/12/15',
          lastMaint: '2025/09/15',
          manager: '游國維',
          quota: '30,000',
          insurance: '統一東京',
        },
        {
          key: '6',
          carNumber: 'RFC-3521',
          spec: 'TOYOTA - RAV4 - 6...',
          type: '通用車輛',
          status: 'rented',
          mileage: '2,197',
          lastCheckMileage: '2,199',
          lastCheckTime: '2025/12/29 14:12',
          lastRefuel: '2025/12/28',
          lastReturn: '2025/12/28 16:24',
          lastForm: '2025/12/29 09:58',
          lastUser: '羅艾拉',
          nextMaint: '2025/12/15',
          lastMaint: '2025/09/15',
          manager: '游國維',
          quota: '30,000',
          insurance: '和運',
        },
      ];

      // [cite: 57-60] Design Tokens 配置
      const statusConfig = {
        active: { text: '可借用', color: '#52c41a', bg: '#f6ffed' }, // Green
        maintenance: { text: '保養中', color: '#1890ff', bg: '#e6f7ff' }, // Blue
        fault: { text: '故障', color: '#f5222d', bg: '#fff1f0' }, // Red
        disabled: { text: '停用', color: '#8c8c8c', bg: '#f5f5f5' }, // Gray
      };

      // 設置屬性 (模擬 Props 傳遞)
      table.setAttribute('table-data', JSON.stringify(mockTableData));
      table.setAttribute('status-config', JSON.stringify(statusConfig));

      // [cite: 31] 監聽 row-action 事件
      table.addEventListener('row-action', (e) => {
        console.log('Row Action Triggered:', e.detail);
        alert(`編輯車輛: ${e.detail.row.carNumber}`);
      });
    </script>
  </body>
</html>
